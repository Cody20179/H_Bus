import{g as j}from"./index-B0ioNfjj.js";import{r as F}from"./leaflet-src-DCIffZry.js";function B(g,m){for(var o=0;o<m.length;o++){const u=m[o];if(typeof u!="string"&&!Array.isArray(u)){for(const c in u)if(c!=="default"&&!(c in g)){const f=Object.getOwnPropertyDescriptor(u,c);f&&Object.defineProperty(g,c,f.get?f:{enumerable:!0,get:()=>u[c]})}}}return Object.freeze(Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}))}var x={exports:{}},C=x.exports,S;function T(){return S||(S=1,(function(g,m){(function(o,u){u(F())})(C,(function(o){o=o&&o.hasOwnProperty("default")?o.default:o;function u(n,t){var i=t.x-n.x,e=t.y-n.y;return Math.sqrt(i*i+e*e)}var c=function(t,i){return(Math.atan2(i.y-t.y,i.x-t.x)*180/Math.PI+90+360)%360},f=function(t,i){var e=t.value,r=t.isInPixels;return r?e/i:e};function v(n){if(typeof n=="string"&&n.indexOf("%")!==-1)return{value:parseFloat(n)/100,isInPixels:!1};var t=n?parseFloat(n):0;return{value:t,isInPixels:t>0}}var w=function(t,i){return t.x===i.x&&t.y===i.y};function M(n){return n.reduce(function(t,i,e,r){if(e>0&&!w(i,r[e-1])){var a=r[e-1],s=t.length>0?t[t.length-1].distB:0,h=u(a,i);t.push({a,b:i,distA:s,distB:s+h,heading:c(a,i)})}return t},[])}function D(n,t){var i=M(n),e=i.length;if(e===0)return[];var r=i[e-1].distB,a=f(t.offset,r),s=f(t.endOffset,r),h=f(t.repeat,r),l=r*h,d=a>0?r*a:0,y=s>0?r*s:0,_=[],b=d;do _.push(b),b+=l;while(l>0&&b<r-y);var P=0,p=i[0];return _.map(function(O){for(;O>p.distB&&P<e-1;)P++,p=i[P];var I=(O-p.distA)/(p.distB-p.distA);return{pt:R(p.a,p.b,I),heading:p.heading}})}function R(n,t,i){return t.x!==n.x?{x:n.x+i*(t.x-n.x),y:n.y+i*(t.y-n.y)}:{x:n.x,y:n.y+(t.y-n.y)*i}}(function(){var n=L.Marker.prototype._initIcon,t=L.Marker.prototype._setPos,i=L.DomUtil.TRANSFORM==="msTransform";L.Marker.addInitHook(function(){var e=this.options.icon&&this.options.icon.options,r=e&&this.options.icon.options.iconAnchor;r&&(r=r[0]+"px "+r[1]+"px"),this.options.rotationOrigin=this.options.rotationOrigin||r||"center bottom",this.options.rotationAngle=this.options.rotationAngle||0,this.on("drag",function(a){a.target._applyRotation()})}),L.Marker.include({_initIcon:function(){n.call(this)},_setPos:function(e){t.call(this,e),this._applyRotation()},_applyRotation:function(){this.options.rotationAngle&&(this._icon.style[L.DomUtil.TRANSFORM+"Origin"]=this.options.rotationOrigin,i?this._icon.style[L.DomUtil.TRANSFORM]="rotate("+this.options.rotationAngle+"deg)":this._icon.style[L.DomUtil.TRANSFORM]+=" rotateZ("+this.options.rotationAngle+"deg)")},setRotationAngle:function(e){return this.options.rotationAngle=e,this.update(),this},setRotationOrigin:function(e){return this.options.rotationOrigin=e,this.update(),this}})})(),o.Symbol=o.Symbol||{},o.Symbol.Dash=o.Class.extend({options:{pixelSize:10,pathOptions:{}},initialize:function(t){o.Util.setOptions(this,t),this.options.pathOptions.clickable=!1},buildSymbol:function(t,i,e,r,a){var s=this.options,h=Math.PI/180;if(s.pixelSize<=1)return o.polyline([t.latLng,t.latLng],s.pathOptions);var l=e.project(t.latLng),d=-(t.heading-90)*h,y=o.point(l.x+s.pixelSize*Math.cos(d+Math.PI)/2,l.y+s.pixelSize*Math.sin(d)/2),_=l.add(l.subtract(y));return o.polyline([e.unproject(y),e.unproject(_)],s.pathOptions)}}),o.Symbol.dash=function(n){return new o.Symbol.Dash(n)},o.Symbol.ArrowHead=o.Class.extend({options:{polygon:!0,pixelSize:10,headAngle:60,pathOptions:{stroke:!1,weight:2}},initialize:function(t){o.Util.setOptions(this,t),this.options.pathOptions.clickable=!1},buildSymbol:function(t,i,e,r,a){return this.options.polygon?o.polygon(this._buildArrowPath(t,e),this.options.pathOptions):o.polyline(this._buildArrowPath(t,e),this.options.pathOptions)},_buildArrowPath:function(t,i){var e=Math.PI/180,r=i.project(t.latLng),a=-(t.heading-90)*e,s=this.options.headAngle/2*e,h=a+s,l=a-s,d=o.point(r.x-this.options.pixelSize*Math.cos(h),r.y+this.options.pixelSize*Math.sin(h)),y=o.point(r.x-this.options.pixelSize*Math.cos(l),r.y+this.options.pixelSize*Math.sin(l));return[i.unproject(d),t.latLng,i.unproject(y)]}}),o.Symbol.arrowHead=function(n){return new o.Symbol.ArrowHead(n)},o.Symbol.Marker=o.Class.extend({options:{markerOptions:{},rotate:!1},initialize:function(t){o.Util.setOptions(this,t),this.options.markerOptions.clickable=!1,this.options.markerOptions.draggable=!1},buildSymbol:function(t,i,e,r,a){return this.options.rotate&&(this.options.markerOptions.rotationAngle=t.heading+(this.options.angleCorrection||0)),o.marker(t.latLng,this.options.markerOptions)}}),o.Symbol.marker=function(n){return new o.Symbol.Marker(n)};var k=function(t){return t instanceof o.LatLng||Array.isArray(t)&&t.length===2&&typeof t[0]=="number"},z=function(t){return Array.isArray(t)&&k(t[0])};o.PolylineDecorator=o.FeatureGroup.extend({options:{patterns:[]},initialize:function(t,i){o.FeatureGroup.prototype.initialize.call(this),o.Util.setOptions(this,i),this._map=null,this._paths=this._initPaths(t),this._bounds=this._initBounds(),this._patterns=this._initPatterns(this.options.patterns)},_initPaths:function(t,i){var e=this;if(z(t)){var r=i?t.concat([t[0]]):t;return[r]}return t instanceof o.Polyline?this._initPaths(t.getLatLngs(),t instanceof o.Polygon):Array.isArray(t)?t.reduce(function(a,s){return a.concat(e._initPaths(s,i))},[]):[]},_initPatterns:function(t){return t.map(this._parsePatternDef)},setPatterns:function(t){this.options.patterns=t,this._patterns=this._initPatterns(this.options.patterns),this.redraw()},setPaths:function(t){this._paths=this._initPaths(t),this._bounds=this._initBounds(),this.redraw()},_parsePatternDef:function(t,i){return{symbolFactory:t.symbol,offset:v(t.offset),endOffset:v(t.endOffset),repeat:v(t.repeat)}},onAdd:function(t){this._map=t,this._draw(),this._map.on("moveend",this.redraw,this)},onRemove:function(t){this._map.off("moveend",this.redraw,this),this._map=null,o.FeatureGroup.prototype.onRemove.call(this,t)},_initBounds:function(){var t=this._paths.reduce(function(i,e){return i.concat(e)},[]);return o.latLngBounds(t)},getBounds:function(){return this._bounds},_buildSymbols:function(t,i,e){var r=this;return e.map(function(a,s){return i.buildSymbol(a,t,r._map,s,e.length)})},_getDirectionPoints:function(t,i){var e=this;if(t.length<2)return[];var r=t.map(function(a){return e._map.project(a)});return D(r,i).map(function(a){return{latLng:e._map.unproject(o.point(a.pt)),heading:a.heading}})},redraw:function(){this._map&&(this.clearLayers(),this._draw())},_getPatternLayers:function(t){var i=this,e=this._map.getBounds().pad(.1);return this._paths.map(function(r){var a=i._getDirectionPoints(r,t).filter(function(s){return e.contains(s.latLng)});return o.featureGroup(i._buildSymbols(r,t.symbolFactory,a))})},_draw:function(){var t=this;this._patterns.map(function(i){return t._getPatternLayers(i)}).forEach(function(i){t.addLayer(o.featureGroup(i))})}}),o.polylineDecorator=function(n,t){return new o.PolylineDecorator(n,t)}}))})()),x.exports}var A=T();const H=j(A),E=B({__proto__:null,default:H},[A]);export{E as l};
